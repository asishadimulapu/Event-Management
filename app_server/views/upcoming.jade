doctype html
html
  head
    title Upcoming Events
    link(rel='stylesheet', href='/css/upcoming.css') // New CSS file for this page
  body
    header
      h1 Event List
      nav
        a.btn(href='/') Home
        a(href='/about') About
        a(href='/events') Manage Events

    main
      h2 Upcoming Events
      ul#event-list
        // List will be populated with JavaScript

    footer
      p &copy; 2024 Event Management App

    script.
      // Function to fetch and display events
      async function fetchEvents() {
          const response = await fetch('/api/events');
          const events = await response.json();
          const eventList = document.getElementById('event-list');

          // Clear the list before populating
          eventList.innerHTML = '';

          // Check if events are returned
          if (events.length === 0) {
              const li = document.createElement('li');
              li.textContent = 'No events found.';
              eventList.appendChild(li);
          }

          events.forEach(event => {
              const li = document.createElement('li');
              li.textContent = `${event.title} - ${event.location} on ${new Date(event.date).toLocaleDateString()}`;

              // Create a delete button
              const deleteButton = document.createElement('button');
              deleteButton.textContent = 'Delete';
              deleteButton.onclick = () => deleteEvent(event._id); // Call delete function
              li.appendChild(deleteButton); // Append the button to the list item

              eventList.appendChild(li);
          });
      }

      // Function to delete an event
      async function deleteEvent(id) {
          const response = await fetch(`/api/events/${id}`, {
              method: 'DELETE',
          });

          if (response.ok) {
              alert('Event deleted successfully!');
              fetchEvents(); // Refresh the event list
          } else {
              const data = await response.json();
              alert(data.message || 'Error deleting event.');
          }
      }

      // Call the function to fetch events when the page loads
      window.onload = fetchEvents;
